<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHY RACING EVENTS | PNW Premier Marathons, Triathlons & 5Ks</title>
    <meta name="description"
        content="Join WHY RACING EVENTS for the Pacific Northwest's premier marathons, triathlons, and 5Ks! Experience world-class racing in WA & OR. Register today!">
    <meta name="keywords"
        content="WHY RACING EVENTS, PNW Events, Marathon, Triathlon, 5K, Half Marathon, Running Community, Washington, Oregon, Race Calendar">

    <link rel="canonical" href="https://whyracingevents.com/" />
    <link rel="icon" type="image/png" href="images/logos/new-why-racing-logo.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://whyracingevents.com/">
    <meta property="og:title" content="WHY RACING EVENTS | Pacific Northwest Premier Marathons & Triathlons">
    <meta property="og:description"
        content="Join the PNW's most supportive racing community. 20+ signature events every year.">
    <meta property="og:image" content="https://whyracingevents.com/images/logos/new-why-racing-logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://whyracingevents.com/">
    <meta property="twitter:title" content="WHY RACING EVENTS | Pacific Northwest Premier Marathons & Triathlons">
    <meta property="twitter:description"
        content="Join the PNW's most supportive racing community. 20+ signature events every year.">
    <meta property="twitter:image" content="https://whyracingevents.com/images/logos/new-why-racing-logo.png">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "name": "WHY RACING EVENTS",
          "url": "https://whyracingevents.com",
          "logo": "https://whyracingevents.com/images/logos/new-why-racing-logo.png",
          "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+1-360-314-4682",
            "contactType": "customer service",
            "areaServed": "US",
            "availableLanguage": "en"
          },
          "sameAs": [
            "https://www.facebook.com/whyracingevents/",
            "https://www.instagram.com/why_racing_events/",
            "https://x.com/whyracingevents",
            "https://www.youtube.com/@WhyRacingEvents"
          ]
        },
        {
          "@type": "WebSite",
          "name": "WHY RACING EVENTS",
          "url": "https://whyracingevents.com",
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://whyracingevents.com/?s={search_term_string}",
            "query-input": "required name=search_term_string"
          }
        }
      ]
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Oswald:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/brand.css">
    <style>
        :root {
            --brand-red: #E31837;
            --brand-blue: #000000;
            --dark: #0a0a0a;
            --light: #ffffff;
            --grey: #f4f4f4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--light);
            color: #333;
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        /* BUTTONS */
        .btn {
            padding: 14px 32px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 4px;
            display: inline-block;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--brand-red);
            color: white;
            box-shadow: 0 4px 15px rgba(227, 24, 55, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: #b00e26;
            box-shadow: 0 6px 20px rgba(227, 24, 55, 0.5);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--brand-blue);
        }

        /* NAV */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%);
            transition: 0.4s;
        }

        nav.scrolled {
            background: linear-gradient(90deg, rgba(0, 0, 0, 0.8) 0%, rgba(227, 24, 55, 0.8) 100%);
            padding: 10px 5%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .logo {
            font-family: 'Oswald', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: white;
            overflow: visible;
            padding: 10px 0;
        }



        .logo span {
            color: var(--brand-red);
        }

        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-links a {
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            color: white;
            letter-spacing: 1px;
        }

        .nav-links a:hover {
            color: var(--brand-red);
        }

        .nav-btn {
            background: white;
            color: var(--brand-red);
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 12px;
        }

        /* HERO - ANGULAR CUT */
        header {
            min-height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 100px 20px 150px;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .hero-bg video,
        .hero-bg-mobile video {
            width: 100%;
            height: 108%;
            /* Increased height to crop watermark */
            object-fit: cover;
            object-position: center top;
            /* Keep top, crop bottom */
            position: absolute;
            top: 0;
            left: 0;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(0, 0, 0, 0.9) 0%, rgba(227, 24, 55, 0.5) 100%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-content .hero-tagline {
            font-size: 4.1rem;
            color: white;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin-top: 30px;
            margin-bottom: 30px;
            font-weight: 700;
            font-family: 'Oswald', sans-serif;
            line-height: 1;
        }

        .hero-content h1 {
            font-size: 2rem;
            line-height: 1;
            margin-bottom: 20px;
            color: white;
            font-style: italic;
            white-space: nowrap;
        }

        .hero-content h1 span {
            color: var(--brand-red);
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 15px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
        }

        .hero-proof {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 25px 0 15px;
            flex-wrap: wrap;
        }

        .hero-proof span {
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hero-proof i {
            color: var(--brand-red);
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        /* LIVE REGISTRATION COUNTER */
        .live-counter {
            background: rgba(255, 255, 255, 0.15);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            padding: 12px 25px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .live-counter .pulse {
            width: 10px;
            height: 10px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        .live-counter span {
            font-size: 14px;
            font-weight: 600;
        }

        .live-counter strong {
            color: var(--brand-red);
        }

        /* SCROLLING TICKER */
        .stats-ticker {
            background: var(--dark);
            color: white;
            padding: 18px 0;
            overflow: hidden;
            white-space: nowrap;
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            border-bottom: 4px solid var(--brand-red);
            margin-top: 0;
            position: relative;
            z-index: 10;
        }

        .ticker-track {
            display: inline-block;
            animation: tickerScroll 30s linear infinite;
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 0 40px;
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .ticker-item i {
            color: var(--brand-red);
        }

        @keyframes tickerScroll {
            0% {
                transform: translateX(-50%);
            }

            100% {
                transform: translateX(0);
            }
        }

        /* EVENT CALENDAR GRID */
        /* SECTIONS */
        .section {
            padding: 80px 5%;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-header h2 {
            font-size: 2.8rem;
            color: var(--brand-blue);
            font-style: italic;
            text-transform: uppercase;
        }

        .section-header p {
            color: #666;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* FILTER BAR */
        .filter-bar {
            background: white;
            padding: 20px 5%;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 60px;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .filter-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .filter-label {
            font-family: 'Oswald', sans-serif;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--brand-blue);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-label i {
            color: var(--brand-red);
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .filter-btn:hover {
            border-color: var(--brand-red);
            color: var(--brand-red);
        }

        .filter-btn.active {
            background: var(--brand-red);
            border-color: var(--brand-red);
            color: white;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #888;
            display: none;
        }

        .no-results i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }

        .event-card.hidden {
            display: none;
        }

        /* TESTIMONIALS SECTION */
        .testimonials-section {
            background: var(--grey);
            padding: 60px 5%;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .testimonial-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .testimonial-card::before {
            content: '"';
            font-family: 'Oswald', sans-serif;
            font-size: 80px;
            color: var(--brand-red);
            opacity: 0.15;
            position: absolute;
            top: 10px;
            left: 20px;
            line-height: 1;
        }

        .testimonial-card p {
            font-size: 15px;
            line-height: 1.7;
            color: #444;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .testimonial-author img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .testimonial-author .info h4 {
            font-size: 14px;
            color: var(--brand-blue);
            margin-bottom: 3px;
        }

        .testimonial-author .info span {
            font-size: 12px;
            color: #888;
        }

        .testimonial-stars {
            color: #ffc107;
            margin-bottom: 15px;
        }

        /* EVENT CARDS */


        .event-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: 0.4s;
            border-bottom: 4px solid transparent;
            display: flex;
            flex-direction: column;
        }

        .card-logo {
            height: 60px;
            max-width: 180px;
            object-fit: contain;
        }

        .card-meta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .event-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-bottom: 4px solid var(--brand-red);
        }

        .card-img {
            height: 250px;
            background-size: cover;
            background-position: center top;
            position: relative;
            overflow: hidden;
        }

        .card-img::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.5));
        }

        .card-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--brand-red);
            color: white;
            padding: 6px 14px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: 4px;
            z-index: 2;
        }

        /* SCARCITY BADGE */
        .card-scarcity {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px;
            font-size: 11px;
            font-weight: 700;
            border-radius: 4px;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .card-scarcity i {
            color: #ffc107;
        }

        .card-body {
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .card-date {
            color: #888;
            font-weight: 600;
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 1.6rem;
            line-height: 1.1;
            margin-bottom: 15px;
            color: var(--brand-blue);
            font-style: italic;
        }

        .card-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            flex-wrap: wrap;
        }

        .card-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #555;
            font-weight: 600;
        }

        .card-meta i {
            color: var(--brand-red);
        }

        /* PRICING ON CARDS */
        .card-pricing {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .card-pricing .price-now {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            color: var(--brand-blue);
            font-weight: 700;
        }

        .card-pricing .price-was {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
        }

        .card-pricing .save {
            background: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-left: auto;
        }

        .card-cta {
            width: 100%;
            background: var(--brand-blue);
            color: white;
            border: none;
            padding: 14px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 13px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }

        .card-cta:hover {
            background: var(--brand-red);
        }

        /* VIEW ALL CTA */
        .view-all-cta {
            text-align: center;
            margin-top: 50px;
        }

        .view-all-cta .btn {
            font-size: 16px;
            padding: 18px 40px;
        }

        .view-all-cta p {
            margin-top: 15px;
            color: #666;
            font-size: 14px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--brand-blue);
            color: var(--brand-blue);
        }

        .btn-outline:hover {
            background: var(--brand-blue);
            color: white;
        }

        /* TRUST BADGES */
        .trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .trust-badges span {
            font-size: 12px;
            color: #888;
        }

        .trust-badges img {
            height: 24px;
            opacity: 0.6;
            transition: 0.3s;
        }

        .trust-badges img:hover {
            opacity: 1;
        }

        .trust-badges .badge-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* FEATURED SECTION - DARK ANGULAR */
        .feature-section {
            background: var(--brand-blue);
            color: white;
            padding: 100px 5%;
            clip-path: polygon(0 8%, 100% 0, 100% 100%, 0 100%);
            margin-top: -50px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            max-width: 1100px;
            margin: 0 auto;
            align-items: center;
        }

        .feature-tag {
            color: var(--brand-red);
            font-weight: 700;
            letter-spacing: 2px;
            font-size: 13px;
            margin-bottom: 10px;
        }

        .feature-content h3 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-style: italic;
        }

        .feature-content p {
            opacity: 0.9;
            margin-bottom: 25px;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .value-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--brand-red);
        }

        .value-item h4 {
            color: white;
            margin-bottom: 5px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .value-item h4 i {
            color: var(--brand-red);
        }

        .value-item p {
            font-size: 14px;
            margin: 0;
            opacity: 0.8;
        }

        /* TILTED PHOTO CARD */
        .photo-card {
            background: white;
            padding: 10px;
            border-radius: 8px;
            transform: rotate(2deg);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .photo-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 4px;
        }

        .photo-card-info {
            padding: 15px;
            color: #333;
        }

        .photo-card-info h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .photo-card-info .meta {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 14px;
        }

        .photo-card-info .meta span:last-child {
            color: var(--brand-red);
        }

        /* PRICE CARD */
        .price-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            color: #333;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .price-current {
            font-family: 'Oswald', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--brand-blue);
        }

        .price-old {
            text-decoration: line-through;
            color: #999;
            font-size: 1.2rem;
            margin-left: 10px;
        }

        .price-save {
            background: #28a745;
            color: white;
            padding: 6px 14px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 700;
        }

        .spots-left {
            background: #fff3cd;
            color: #856404;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
        }

        .price-cta {
            width: 100%;
            background: var(--brand-red);
            color: white;
            border: none;
            padding: 16px;
            font-size: 15px;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.3s;
        }

        .price-cta:hover {
            background: #b00e26;
        }

        /* CALENDAR SECTION REFACTORED STYLES */
        .calendar-section {
            padding: 0 !important;
            background: var(--grey) !important;
        }

        .calendar-intro {
            padding: 80px 5% 40px !important;
            background: white !important;
            text-align: center !important;
        }

        .calendar-section .subtitle {
            color: var(--brand-red);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 3px;
            margin-bottom: 8px;
        }

        .calendar-title {
            font-size: 3rem !important;
            margin-bottom: 15px !important;
        }

        .calendar-desc {
            max-width: 700px;
            margin: 0 auto;
            color: #666;
            font-size: 1.1rem;
        }

        .calendar-desc+.calendar-desc {
            margin-top: 10px;
        }

        .calendar-features-highlight {
            text-align: center;
            padding: 0 20px 40px;
            max-width: 800px;
            margin: 0 auto;
        }

        .no-results {
            padding: 100px 20px;
            text-align: center;
            display: none;
            background: white;
        }

        .no-results-icon {
            font-size: 3rem;
            color: #ddd;
            margin-bottom: 20px;
        }

        .no-results-title {
            font-size: 1.5rem;
            color: var(--brand-blue);
        }

        .no-results-text {
            color: #888;
        }

        .api-error-box {
            padding: 60px 20px;
            text-align: center;
            display: none;
            background: #fff0f0;
            margin: 40px 5%;
            border-radius: 8px;
            border: 1px solid #ffcdd2;
        }

        .api-error-icon {
            font-size: 2.5rem;
            color: #e53e3e;
            margin-bottom: 15px;
        }

        .api-error-title {
            font-size: 1.4rem;
            color: #c53030;
            margin-bottom: 10px;
        }

        .api-error-text {
            color: #666;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .error-code {
            font-family: monospace;
            background: rgba(255, 0, 0, 0.1);
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-top: 10px;
            display: inline-block;
        }

        .error-details-text {
            font-size: 0.9rem;
            color: #888;
        }

        .q-alt {
            background: var(--grey) !important;
            padding-top: 40px !important;
            padding-bottom: 40px !important;
        }

        .q-white {
            background: white !important;
            padding-top: 40px !important;
            padding-bottom: 40px !important;
        }

        .view-all-cta {
            padding: 60px 0;
            text-align: center;
            background: white;
        }

        .trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            flex-wrap: wrap;
        }

        .badge-label {
            font-size: 13px;
            color: #777;
            font-weight: 600;
        }

        .badge-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cc-badge {
            height: 20px;
            opacity: 0.7;
        }

        .cc-badge.mastercard {
            height: 26px;
        }

        .pci-label {
            font-size: 13px;
            color: #777;
        }

        .pci-icon {
            color: #28a745;
            margin-right: 5px;
        }

        /* RACE CARD PERFORMANCE OPTIMIZATIONS */
        .event-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
            border: 1px solid #eee;
            will-change: transform, opacity;
        }

        .event-card.loading {
            opacity: 0;
            transform: translateY(20px);
        }

        .event-card.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .skeleton {
            background: #f1f5f9;
            background: linear-gradient(110deg, #f1f5f9 8%, #e2e8f0 18%, #f1f5f9 33%);
            background-size: 200% 100%;
            animation: skeleton-shine 1.5s linear infinite;
        }

        @keyframes skeleton-shine {
            to {
                background-position-x: -200%;
            }
        }

        .skeleton-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            height: 400px;
        }

        .skeleton-img {
            height: 200px;
            border-radius: 0;
        }

        .skeleton-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .skeleton-title {
            height: 24px;
            width: 80%;
        }

        .skeleton-date {
            height: 16px;
            width: 40%;
        }

        .skeleton-meta {
            height: 16px;
            width: 60%;
        }

        .skeleton-btn {
            height: 44px;
            width: 100%;
            margin-top: auto;
            border-radius: 6px;
        }

        .card-img-container {
            height: 200px;
            position: relative;
            overflow: hidden;
            background: #e2e8f0;
        }

        .card-img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .card-img-container img.loading {
            opacity: 0;
        }

        .doubt-text {
            text-align: center;
            margin-top: 12px;
            font-size: 12px;
            color: #888;
        }

        .doubt-text i {
            color: #28a745;
            margin: 0 3px;
        }

        /* FOOTER */
        footer {
            background: #111;
            color: #888;
            padding: 50px 5% 100px;
            text-align: center;
        }

        .footer-brand {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 10px;
        }

        .footer-brand span {
            color: var(--brand-red);
        }

        .footer-tagline {
            margin-bottom: 25px;
            font-style: italic;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .footer-links a {
            transition: 0.3s;
        }

        .footer-links a:hover {
            color: var(--brand-red);
        }

        .footer-social {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .footer-social a {
            width: 40px;
            height: 40px;
            border: 1px solid #444;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: 0.3s;
        }

        .footer-social a:hover {
            background: var(--brand-red);
            border-color: var(--brand-red);
        }

        .footer-copy {
            font-size: 13px;
            opacity: 0.5;
        }

        /* NEW STICKY BAR STYLES */
        .sticky-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.15);
            border-top: 3px solid var(--brand-red);
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .sticky-bar.visible {
            transform: translateY(0);
        }

        .sticky-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .sticky-label-group {
            display: flex;
            flex-direction: column;
        }

        .sticky-label {
            font-size: 10px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .sticky-race-name {
            font-family: 'Oswald', sans-serif;
            font-size: 1.25rem;
            color: var(--brand-blue);
            text-transform: uppercase;
            line-height: 1.1;
        }

        .sticky-countdown {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            color: var(--brand-red);
            font-weight: 700;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .sticky-countdown span {
            color: var(--brand-blue);
            opacity: 0.8;
            font-size: 0.9rem;
            margin-left: -4px;
        }

        .sticky-btn {
            background: var(--brand-red);
            color: white;
            padding: 12px 28px;
            border-radius: 50px;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            font-weight: 700;
            font-size: 0.95rem;
            letter-spacing: 1px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(227, 24, 55, 0.3);
        }

        .sticky-btn:hover {
            background: var(--brand-red-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(227, 24, 55, 0.4);
        }

        /* MOBILE MENU */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 10px;
            z-index: 1001;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 3px;
            transition: 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.98);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .mobile-menu.active {
            display: flex;
        }

        .mobile-menu a {
            color: white;
            font-family: 'Oswald', sans-serif;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .mobile-menu a:hover {
            color: var(--brand-red);
        }

        /* MOBILE */
        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2.2rem;
                white-space: normal;
                line-height: 1.1;
            }

            .card-title {
                font-size: 1.3rem;
            }

            .card-body {
                padding: 15px;
            }

            .hero-content .hero-tagline {
                font-size: 2rem;
            }

            .section {
                padding: 40px 5%;
            }

            .section-header {
                margin-bottom: 30px;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .section-header p {
                font-size: 0.95rem;
            }

            .hero-proof {
                gap: 15px;
            }

            header {
                clip-path: none;
                min-height: 0;
                padding: 100px 20px 80px;
            }

            .stats-ticker {
                margin-top: 0;
            }

            .feature-section {
                clip-path: none;
                margin-top: 0;
                padding: 60px 5%;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .photo-card {
                transform: none;
                margin-top: 30px;
            }

            .nav-links {
                display: none;
            }

            .hamburger {
                display: flex;
            }

            .nav-btn {
                display: none;
            }

            .calendar-intro {
                padding: 40px 5% 20px !important;
            }

            .calendar-title {
                font-size: 2.22rem !important;
                margin-bottom: 10px !important;
            }

            .calendar-desc {
                font-size: 15.4px;
                line-height: 1.5;
            }

            .filter-bar {
                padding: 15px 5%;
                top: 70px;
            }

            .filter-label {
                font-size: 12px;
                margin-bottom: 12px;
            }

            .filter-buttons {
                gap: 8px;
            }

            .filter-btn {
                padding: 8px 15px;
                font-size: 11px;
            }

            .event-grid {
                gap: 20px;
                grid-template-columns: 1fr;
            }

            /* Premium Vertical Mobile Cards - Tightened */
            .event-card {
                flex-direction: column;
                max-height: none;
                border: none;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                border-radius: 12px;
            }

            .event-card .card-img-container {
                width: 100%;
                height: 180px;
                min-width: unset;
                border-radius: 12px 12px 0 0;
            }

            .event-card .card-body {
                padding: 15px;
            }

            .event-card .card-title {
                font-size: 1.3rem;
                margin-bottom: 10px;
                line-height: 1.2;
            }

            .event-card .card-date {
                margin-bottom: 6px;
                font-size: 18px;
                letter-spacing: 1px;
                color: var(--brand-red);
            }

            .event-card .card-meta-row {
                display: flex !important;
                /* Restore on mobile */
                justify-content: space-between;
                align-items: center;
                margin-top: 12px;
                padding-top: 12px;
                border-top: 1px solid #f1f5f9;
            }

            .event-card .card-meta {
                margin-bottom: 0;
                padding-top: 0;
                border-top: none;
                gap: 12px;
            }

            .event-card .card-meta span {
                font-size: 11px;
                color: #64748b;
            }

            .event-card .card-pricing {
                margin-bottom: 12px;
            }

            .event-card .card-cta {
                padding: 12px;
                font-size: 13px;
                letter-spacing: 1px;
                border-radius: 6px !important;
                box-shadow: 0 4px 12px rgba(227, 24, 55, 0.15);
            }

            .event-card .card-scarcity {
                display: block !important;
                margin-bottom: 12px;
            }

            .hero-event-card {
                margin: 20px 10px 0;
            }

            .hero-event-card .event-details {
                flex-direction: column;
                gap: 8px;
            }

            .testimonials-grid {
                grid-template-columns: 1fr;
            }

            .hero-bg video {
                display: none;
            }

            .hero-bg-mobile {
                display: block;
            }

            /* STICKY BAR MOBILE - ULTRA COMPACT */
            .sticky-bar {
                padding: 6px 12px;
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                gap: 5px;
                background: white;
            }

            .sticky-info {
                gap: 5px;
            }

            .sticky-label-group {
                display: flex;
                flex-direction: column;
            }

            .sticky-label {
                font-size: 7px;
                letter-spacing: 0.5px;
            }

            .sticky-race-name {
                font-size: 0.75rem;
                max-width: 100px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .sticky-countdown {
                font-size: 0.85rem;
                gap: 4px;
            }

            .sticky-countdown span {
                font-size: 0.7rem;
            }

            .sticky-btn {
                padding: 6px 12px;
                font-size: 0.7rem;
                border-radius: 4px;
                white-space: nowrap;
            }
        }
    </style>
</head>

<body>

    <!-- NAV -->
    <nav id="navbar">
        <a href="index.html" class="logo"><img src="images/logos/new-why-racing-logo.png"
                alt="WHY RACING EVENTS Home"></a>
        <div class="nav-links">
            <a href="pages/training.html">Training</a>
            <a href="pages/volunteers.html">Volunteer</a>
            <a href="pages/beneficiary.html">Give Back</a>
            <a href="pages/community.html">Community</a>
            <a href="pages/locations.html">Travel</a>
            <a href="pages/partners.html">Sponsors</a>
            <a href="pages/about.html">About</a>
        </div>
        <div class="hamburger" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <a href="#calendar" class="nav-btn">Find My Race</a>
    </nav>

    <div class="mobile-menu" id="mobileMenu">
        <a href="index.html">Home</a>
        <a href="pages/training.html">Training</a>
        <a href="pages/volunteers.html">Volunteer</a>
        <a href="pages/beneficiary.html">Give Back</a>
        <a href="pages/community.html">Community</a>
        <a href="pages/locations.html">Travel</a>
        <a href="pages/partners.html">Sponsors</a>
        <a href="pages/about.html">About</a>
        <a href="#calendar" class="btn btn-primary menu-cta">Find Your Race</a>
    </div>

    <!-- HERO -->
    <header>
        <div class="hero-bg" id="heroBg">
            <!-- Video injected via JS to resolve compatibility warnings -->
        </div>
        <div class="hero-bg-mobile" id="heroBgMobile">
            <!-- Video injected via JS to resolve compatibility warnings -->
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <p class="hero-tagline">What's Your Why?</p>
            <h1>RUN. RIDE. <span>REMEMBER.</span></h1>
            <p>Whether you're running your first 5K or your 50th race, join the Pacific Northwest's most supportive
                running community.</p>

            <div class="hero-proof">
                <span><i class="fas fa-heart"></i> $3M+ Raised for Charity</span>
                <span><i class="fas fa-users"></i> 50,000+ Athletes Strong</span>
                <span><i class="fas fa-star"></i> 4.9/5 Runner Rating</span>
            </div>


            <div class="hero-buttons">
                <a href="#calendar" class="btn btn-secondary">View All 21 Races</a>
            </div>
        </div>
    </header>

    <!-- SCROLLING TICKER -->
    <div class="stats-ticker">
        <div class="ticker-track">
            <span class="ticker-item"><i class="fas fa-heart"></i> Your Registration Supports Local Charities</span>
            <span class="ticker-item"><i class="fas fa-users"></i> 50,000+ Athletes Strong</span>
            <span class="ticker-item"><i class="fas fa-trophy"></i> 21 Premier PNW Events</span>
            <span class="ticker-item"><i class="fas fa-mountain"></i> Stunning Scenic Courses</span>
            <span class="ticker-item"><i class="fas fa-medal"></i> Epic Swag & Medals</span>
            <span class="ticker-item"><i class="fas fa-music"></i> Live Music & After Parties</span>
            <span class="ticker-item"><i class="fas fa-heart"></i> Your Registration Supports Local Charities</span>
            <span class="ticker-item"><i class="fas fa-users"></i> 50,000+ Athletes Strong</span>
            <span class="ticker-item"><i class="fas fa-trophy"></i> 21 Premier PNW Events</span>
            <span class="ticker-item"><i class="fas fa-mountain"></i> Stunning Scenic Courses</span>
            <span class="ticker-item"><i class="fas fa-medal"></i> Epic Swag & Medals</span>
            <span class="ticker-item"><i class="fas fa-music"></i> Live Music & After Parties</span>
        </div>
    </div>

    <!-- SPONSOR TICKER -->
    <div class="sponsor-ticker">
        <div class="sponsor-ticker-label">Proud Partners</div>
        <div class="sponsor-track">
            <img src="images/sponsors/peacehealth.png" alt="PeaceHealth">
            <img src="images/sponsors/foot-traffic.jpg" alt="Foot Traffic">
            <img src="images/sponsors/pepsi.png" alt="PepsiCo">
            <img src="images/sponsors/mccords-toyota.png" alt="McCord's Vancouver Toyota">
            <img src="images/sponsors/nw-personal-training.png" alt="NW Personal Training">
            <img src="images/sponsors/em3-concrete.jpg" alt="EM3 Concrete">
            <img src="images/sponsors/peacehealth.png" alt="PeaceHealth">
            <img src="images/sponsors/foot-traffic.jpg" alt="Foot Traffic">
            <img src="images/sponsors/pepsi.png" alt="PepsiCo">
            <img src="images/sponsors/mccords-toyota.png" alt="McCord's Vancouver Toyota">
            <img src="images/sponsors/nw-personal-training.png" alt="NW Personal Training">
            <img src="images/sponsors/em3-concrete.jpg" alt="EM3 Concrete">
        </div>
    </div>

    <!-- 2026 RACE CALENDAR SECTION (MERGED FROM EVENTS PAGE) -->
    <section id="calendar" class="section calendar-section">
        <div class="calendar-intro">
            <p class="subtitle">Find Your Why</p>
            <h2 class="calendar-title">2026 Race Calendar</h2>
            <p class="calendar-desc">From winter snowshoeing to summer triathlons and
                fall marathons.
            </p>
        </div>

        <div class="filter-bar">
            <div class="filter-container">
                <div class="filter-label"><i class="fas fa-filter"></i> Filter by Distance</div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All Events</button>
                    <button class="filter-btn" data-filter="5k">5K</button>
                    <button class="filter-btn" data-filter="10k">10K</button>
                    <button class="filter-btn" data-filter="half">Half Marathon</button>
                    <button class="filter-btn" data-filter="marathon">Marathon</button>
                    <button class="filter-btn" data-filter="ultra">Ultra (25K+)</button>
                    <button class="filter-btn" data-filter="trail">Trail Run</button>
                    <button class="filter-btn" data-filter="triathlon">Triathlon</button>
                </div>
            </div>
        </div>

        <div class="no-results" id="noResults">
            <i class="fas fa-search no-results-icon"></i>
            <h3 class="no-results-title">No Events Found</h3>
            <p class="no-results-text">Try selecting different distance filters above.</p>
        </div>

        <div id="apiError" class="api-error-box">
            <i class="fas fa-exclamation-triangle api-error-icon"></i>
            <h3 class="api-error-title">Connection Error</h3>
            <p class="api-error-text">We couldn't load the upcoming races.
                <br><span id="errorDetails" class="error-code"></span>
            </p>
            <p class="error-details-text">If you are the administrator, please check your Vercel
                Environment Variables.</p>
        </div>

        <div class="calendar-features-highlight">
            <p class="calendar-desc">Every WHY RACING EVENT features fully insured and certified courses, an
                unforgettable post-race festival experience, and amazing food at the finish line.</p>
        </div>

        <!-- JAN - MAR -->
        <div class="calendar-quarter-section section q-alt" id="q1-section">
            <div class="section-header">
                <h2>January - March</h2>
                <p>Start the year strong with winter adventures</p>
            </div>
            <div class="event-grid">
                <!-- Dynamically loaded from DB -->
            </div>
        </div>

        <!-- APR - JUN -->
        <div class="calendar-quarter-section section q-white" id="q2-section">
            <div class="section-header">
                <h2>April - June</h2>
                <p>Spring into action with trail runs and triathlons</p>
            </div>
            <div class="event-grid">
                <!-- Dynamically loaded from DB -->
            </div>
        </div>

        <!-- JUL - SEP -->
        <div class="calendar-quarter-section section q-alt" id="q3-section">
            <div class="section-header">
                <h2>July - September</h2>
                <p>Summer racing at its finest</p>
            </div>
            <div class="event-grid">
                <!-- Dynamically loaded from DB -->
            </div>
        </div>

        <!-- OCT - DEC -->
        <div class="calendar-quarter-section section q-white" id="q4-section">
            <div class="section-header">
                <h2>October - December</h2>
                <p>Finish the year with fall favorites and holiday races</p>
            </div>
            <div class="event-grid">
                <!-- Dynamically loaded from DB -->
            </div>
        </div>


    </section>

    <!-- TESTIMONIALS SECTION -->
    <section class="testimonials-section">
        <div class="section-header">
            <h2>What Runners Are Saying</h2>
            <p>Join thousands of athletes who've found their WHY</p>
        </div>
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="testimonial-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p>"Great race and professional production! Great event every year... Great post party and the course is
                    straight out and back. Medal is great... Why Racing does a good job always!"</p>
                <div class="testimonial-author">
                    <img src="images/athletes/jenni.jpg" alt="Jenni, Spring Classic Finisher" loading="lazy">
                    <div class="info">
                        <h4>Finisher</h4>
                        <span>Spring Classic Duathlon & Half Marathon</span>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p>"Why racing put on another great show. The course has changed with it shifting over to the new
                    waterfront... Race swag was top notch, with amazing medal... Plus free race pictures!"</p>
                <div class="testimonial-author">
                    <img src="images/athletes/dan.jpg" alt="Dan, proud Why Racing Events participant">
                    <div class="info">
                        <h4>Participant</h4>
                        <span>Couve Clover Run</span>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p>"Had a lot of fun... Great food at the end. Such a professional set up from start to finish. Why
                    Racing does the best events in Oregon and Washington. You want to go to this race."</p>
                <div class="testimonial-author">
                    <img src="images/athletes/amy.jpg" alt="Amy, proud Why Racing Events runner">
                    <div class="info">
                        <h4>Runner</h4>
                        <span>Appletree Marathon</span>
                    </div>
                </div>
            </div>
        </div>
    </section>







    <!-- FOOTER -->
    <footer>
        <div class="footer-container">
            <!-- Brand Section -->
            <div class="footer-brand-section">
                <div class="footer-brand">WHY <span>RACING EVENTS</span></div>
                <div class="footer-tagline">"What's your WHY? Find it on the course."</div>
                <div class="footer-social-links">
                    <a href="https://www.facebook.com/whyracingevents/" target="_blank" rel="noopener"
                        title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/why_racing_events/" target="_blank" rel="noopener"
                        title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://x.com/whyracingevents" target="_blank" rel="noopener" title="Twitter"><i
                            class="fab fa-twitter"></i></a>
                    <a href="https://www.youtube.com/@WhyRacingEvents" target="_blank" rel="noopener" title="YouTube"><i
                            class="fab fa-youtube"></i></a>
                </div>
            </div>

            <!-- Links Section -->
            <div class="footer-links-section">
                <h4>Quick Links</h4>
                <div class="footer-links-grid">
                    <a href="#calendar">Races</a>
                    <a href="pages/training.html">Training</a>
                    <a href="pages/volunteers.html">Volunteer</a>
                    <a href="pages/beneficiary.html">Give Back</a>
                    <a href="pages/community.html">Community</a>
                    <a href="pages/locations.html">Travel</a>
                    <a href="pages/partners.html">Sponsors</a>
                    <a href="pages/about.html">About</a>
                </div>
            </div>

            <!-- Newsletter Section -->
            <div class="footer-newsletter-section">
                <h4>Join the Movement</h4>
                <div class="newsletter-spot">
                    <p>Get race updates, training tips, and exclusive early-bird registration alerts.</p>
                    <form id="email-signup-form">
                        <input type="hidden" name="source" value="homepage">
                        <div aria-hidden="true" class="honeypot">
                            <label for="website">Website</label>
                            <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
                        </div>
                        <div class="newsletter-signup-row">
                            <input type="text" name="firstName" placeholder="First Name" required
                                class="newsletter-input">
                            <input type="text" name="lastName" placeholder="Last Name" required
                                class="newsletter-input">
                        </div>
                        <input type="email" name="email" placeholder="Email Address" required
                            class="newsletter-input newsletter-email-input">
                        <button type="submit" class="btn newsletter-submit">KEEP ME POSTED! <i
                                class="fas fa-arrow-right"></i></button>
                        <div id="signup-status" class="status-message newsletter-status-message"></div>
                    </form>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-copy"> 2025 WHY RACING EVENTS Inc.  La Center, WA  (360) 314-4682</div>
            <div class="staff-portal-footer">
                <a href="pages/admin/races.html" class="staff-portal-link">Staff Portal</a>
            </div>
        </div>
    </footer>

    <!-- DYNAMIC STICKY BAR -->
    <div id="stickyBar" class="sticky-bar">
        <div class="sticky-info">
            <div class="sticky-label-group">
                <span class="sticky-label">Next Up</span>
                <strong class="sticky-race-name" id="stickyRaceName">Loading...</strong>
            </div>
        </div>
        <div class="sticky-countdown" id="stickyCountdown">
            <!-- Injected by JS -->
        </div>
        <a id="stickyRegBtn" href="#" class="btn btn-primary sticky-btn">Register </a>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const hamburger = document.querySelector('.hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
        }

        function showRaceDetails(registrationUrl) {
            const sanitizedUrl = window.formatExternalUrl(registrationUrl);
            if (sanitizedUrl && sanitizedUrl !== '#') {
                window.open(sanitizedUrl, '_blank', 'noopener,noreferrer');
            }
        }

        // Nav scroll effect
        window.addEventListener('scroll', function () {
            var nav = document.getElementById('navbar');

            if (window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');
        });

        function initStickyBar(races) {
            const visibleRaces = races.filter(r => r.is_visible && r.status === 'active');
            if (visibleRaces.length === 0) return;

            // Get current date
            const now = new Date();

            // Find the next upcoming race (first one with date >= now)
            // Using EOD to include races happening today
            const upcoming = visibleRaces
                .filter(r => new Date(r.race_date + 'T23:59:59') >= now)
                .sort((a, b) => new Date(a.race_date) - new Date(b.race_date))[0];

            if (!upcoming) return;

            const bar = document.getElementById('stickyBar');
            const nameEl = document.getElementById('stickyRaceName');
            const countdownEl = document.getElementById('stickyCountdown');
            const btnEl = document.getElementById('stickyRegBtn');

            nameEl.innerText = upcoming.name.toUpperCase();
            btnEl.href = window.formatExternalUrl(upcoming.registration_url) || '#';
            btnEl.setAttribute('target', '_blank');
            btnEl.setAttribute('rel', 'noopener');

            // ALWAYS visible as requested
            bar.classList.add('visible');

            // Countdown logic
            const raceDate = new Date(upcoming.race_date + 'T00:00:00');

            function updateStickyCountdown() {
                const diff = raceDate - Date.now();
                if (diff < 0) {
                    countdownEl.innerHTML = "TODAY!";
                    return;
                }

                const d = Math.floor(diff / 86400000);
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);

                countdownEl.innerHTML = `${d}<span>d</span> ${h}<span>h</span> ${m}<span>m</span>`;
            }

            setInterval(updateStickyCountdown, 60000);
            updateStickyCountdown();
        }

        // Inject hero videos after load to satisfy static linters
        window.addEventListener('load', function () {
            const heroBg = document.getElementById('heroBg');
            const heroBgMobile = document.getElementById('heroBgMobile');

            if (heroBg) {
                const video = document.createElement('video');
                video.autoplay = true;
                video.muted = true;
                video.loop = true;
                video.playbackRate = 0.75;
                video.setAttribute('playsinline', '');
                video.poster = "images/Scrapedimages/our-lifestyle-img.jpg";
                const source = document.createElement('source');
                source.src = "videos/Hero4.mp4";
                source.type = "video/mp4";
                video.appendChild(source);
                heroBg.appendChild(video);
            }

            if (heroBgMobile) {
                const video = document.createElement('video');
                video.autoplay = true;
                video.muted = true;
                video.loop = true;
                video.playbackRate = 0.75;
                video.setAttribute('playsinline', '');
                const source = document.createElement('source');
                source.src = "videos/Hero4.mp4";
                source.type = "video/mp4";
                video.appendChild(source);
                heroBgMobile.appendChild(video);
            }
        });

        // Live registration counter animation
        var regCounter = document.getElementById('regCount');
        var baseCount = 2847;
        function updateRegCount() {
            var randomAdd = Math.floor(Math.random() * 3);
            baseCount += randomAdd;
            regCounter.innerText = baseCount.toLocaleString();
        }
        setInterval(updateRegCount, 15000);

        // Create race card HTML for database races
        function createDynamicRaceCard(race, index = 0) {
            const distances = race.race_distances || [];
            const distanceText = distances.map(d => d.name || d.distance_value).join(' / ') || 'Details TBA';
            const filterKeywords = distances.map(d => {
                const name = (d.name || '').toLowerCase();
                if (name.includes('5k')) return '5k';
                if (name.includes('10k')) return '10k';
                if (name.includes('half marathon')) return 'half';
                if (name.includes('marathon')) return 'marathon';
                if (name.includes('ultra')) return 'ultra';
                if (name.includes('trail')) return 'trail';
                if (name.includes('triathlon')) return 'triathlon';
                return '';
            }).filter(k => k).join(' ');

            const cardImage = race.thumbnail_url || race.hero_image_url || 'images/action/hagg-lake-run.jpg';
            const date = new Date(race.race_date + 'T00:00:00');
            const dateStr = date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

            const regUrl = window.formatExternalUrl(race.registration_url) || '#';
            const infoUrl = window.formatExternalUrl(race.instructions_pdf_url || race.registration_url) || '#';

            const registerButton = race.registration_url && race.registration_open
                ? `<a href="${regUrl}" target="_blank" rel="noopener" class="card-cta" style="background: var(--brand-red); text-decoration: none; display: flex; align-items: center; justify-content: center; padding: 14px; font-size: 13px; font-weight: 800; width: 100%; border-radius: 6px;">Register Now</a>`
                : `<span class="card-cta" style="background: #ccc; cursor: not-allowed; display: flex; align-items: center; justify-content: center; padding: 14px; font-size: 13px; color: #666; width: 100%; border-radius: 6px;">Coming Soon</span>`;

            const logoHtml = race.logo_url
                ? `<img src="${race.logo_url}" alt="${race.name} logo" class="card-logo" loading="lazy">`
                : '';

            const card = document.createElement('div');
            card.className = 'event-card dynamic-db-card loading';
            card.dataset.distance = filterKeywords;
            card.dataset.dateSort = race.race_date;
            // Set staggered delay
            card.style.transitionDelay = `${index * 0.05}s`;

            card.innerHTML = `
                <div class="card-img-container skeleton" onclick="showRaceDetails('${infoUrl}')" style="cursor: pointer;">
                    <img src="${cardImage}" alt="${race.name}" loading="lazy" class="loading" onload="this.classList.remove('loading'); this.parentElement.classList.remove('skeleton')" style="${race.name.includes('Bigfoot') ? 'object-position: center 25%' : ''}">
                </div>
                <div class="card-body">
                    <div onclick="showRaceDetails('${infoUrl}')" style="cursor: pointer;">
                        <span class="card-date">${dateStr}</span>
                        <h3 class="card-title">${race.name || 'New Race'}</h3>
                    </div>
                    <div style="margin-top: auto;">
                        <div onclick="showRaceDetails('${infoUrl}')" style="cursor: pointer;">
                            <div class="card-meta-row">
                                <div class="card-meta" style="margin-bottom: 0; padding-top: 0; border-top: none;">
                                    <span><i class="fas fa-route"></i> ${distanceText}</span>
                                    <span><i class="fas fa-map-marker-alt"></i> ${race.city || 'TBA'}${race.state ? ', ' + race.state : ''}</span>
                                </div>
                                ${logoHtml}
                            </div>
                        </div>
                        <div style="padding-top: 10px;">
                            ${registerButton}
                        </div>
                    </div>
                </div>
            `;

            requestAnimationFrame(() => {
                setTimeout(() => card.classList.add('fade-in'), 10);
            });

            return card;
        }

        // Render functions for race grids
        function renderRacesToGraces(races, grids) {
            const visibleRaces = races.filter(r => r.is_visible && r.status === 'active');
            if (visibleRaces.length === 0) return;

            // Pre-sort races once
            visibleRaces.sort((a, b) => (a.race_date || '').localeCompare(b.race_date || ''));

            // Clear previous and prepare fragments
            const fragments = {};
            Object.keys(grids).forEach(key => {
                if (grids[key]) {
                    grids[key].innerHTML = '';
                    fragments[key] = document.createDocumentFragment();
                }
            });

            // Counters for staggered delay per section
            const counters = { 'Q1': 0, 'Q2': 0, 'Q3': 0, 'Q4': 0 };

            visibleRaces.forEach(race => {
                if (!race.race_date) return;
                const month = new Date(race.race_date + 'T00:00:00').getMonth() + 1;
                const quarter = month <= 3 ? 'Q1' : month <= 6 ? 'Q2' : month <= 9 ? 'Q3' : 'Q4';

                if (fragments[quarter]) {
                    fragments[quarter].appendChild(createDynamicRaceCard(race, counters[quarter]++));
                }
            });

            // Batch append fragments to DOM
            Object.keys(grids).forEach(key => {
                if (grids[key] && fragments[key]) {
                    grids[key].appendChild(fragments[key]);
                }
            });
        }

        // Load and insert database races
        async function loadHomepageRaces() {
            const grids = {
                'Q1': document.querySelector('#q1-section .event-grid'),
                'Q2': document.querySelector('#q2-section .event-grid'),
                'Q3': document.querySelector('#q3-section .event-grid'),
                'Q4': document.querySelector('#q4-section .event-grid')
            };

            // Show skeletons immediately
            const skeletonHtml = Array(3).fill(0).map(() => `
                <div class="skeleton-card">
                    <div class="skeleton skeleton-img"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-date"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-meta"></div>
                        <div class="skeleton skeleton-btn"></div>
                    </div>
                </div>
            `).join('');

            Object.values(grids).forEach(grid => { if (grid) grid.innerHTML = skeletonHtml; });

            // 1. Try Cache First
            const cached = localStorage.getItem('why_races_cache');
            if (cached) {
                try {
                    const races = JSON.parse(cached);
                    renderRacesToGraces(races, grids);
                    initStickyBar(races);
                } catch (e) { localStorage.removeItem('why_races_cache'); }
            }

            // 2. Fetch Fresh Data
            try {
                const response = await fetch('/api/races');
                if (response.ok) {
                    const races = await response.json();
                    localStorage.setItem('why_races_cache', JSON.stringify(races));
                    renderRacesToGraces(races, grids);
                    initStickyBar(races);
                }
            } catch (error) {
                console.error('API Error:', error);
            }
        }

        // Calendar Filtering Logic
        document.addEventListener('DOMContentLoaded', function () {
            // Load database races first
            loadHomepageRaces();

            var filterBtns = document.querySelectorAll('.filter-btn');
            var noResults = document.getElementById('noResults');
            var sections = document.querySelectorAll('.calendar-quarter-section');

            filterBtns.forEach(function (btn) {
                btn.addEventListener('click', function () {
                    var filter = this.dataset.filter;

                    // Update button states
                    filterBtns.forEach(function (b) { b.classList.remove('active'); });
                    this.classList.add('active');

                    // Get ALL event cards including dynamically added ones
                    var eventCards = document.querySelectorAll('.event-card');
                    var visibleCount = 0;

                    // Filter cards
                    eventCards.forEach(function (card) {
                        var distances = card.dataset.distance || '';

                        if (filter === 'all' || distances.split(' ').includes(filter)) {
                            card.classList.remove('hidden');
                            card.style.display = '';
                            visibleCount++;
                        } else {
                            card.classList.add('hidden');
                            card.style.display = 'none';
                        }
                    });

                    // Hide/Show sections based on visible cards
                    sections.forEach(function (section) {
                        var visibleCardsInSection = section.querySelectorAll('.event-card:not(.hidden)');
                        if (visibleCardsInSection.length === 0) {
                            section.style.display = 'none';
                        } else {
                            section.style.display = '';
                        }
                    });

                    // Handle no results
                    if (noResults) {
                        noResults.style.display = visibleCount === 0 ? 'block' : 'none';
                    }
                });
            });
        });
    </script>

    <!-- Chatbot Widget -->
    <div id="chatbot-root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        function WhyRacingChatbot() {
            const [isOpen, setIsOpen] = React.useState(false);
            const [messages, setMessages] = React.useState([
                { role: 'assistant', content: "Hi!  I'm your WHY RACING EVENTS assistant. Ask me about our 2026 events, registration, course records, packet pickup times, or anything else!" }
            ]);
            const [input, setInput] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            const messagesEndRef = React.useRef(null);

            React.useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            const sendMessage = async () => {
                if (!input.trim() || isLoading) return;
                const userMessage = input.trim();
                setInput('');
                setMessages(prev => [...prev, { role: 'user', content: userMessage }]);
                setIsLoading(true);
                try {
                    const response = await fetch('/api/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ messages: [...messages.slice(1), { role: 'user', content: userMessage }] })
                    });
                    const data = await response.json();
                    const assistantMessage = data.content?.[0]?.text || "Sorry, I couldn't process that. Please try again!";
                    setMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
                } catch (error) {
                    setMessages(prev => [...prev, { role: 'assistant', content: "Oops! Something went wrong. Please contact us at info@whyracingevents.com or call (360) 314-4682" }]);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleKeyPress = (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } };

            return (
                <>
                    <style>{`
        @keyframes chatBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
        #why-chat-toggle:hover { transform: scale(1.05); box-shadow: 0 6px 25px rgba(227, 24, 55, 0.5); }
        #why-chat-input:focus { border-color: #E31837; }
        #why-send-btn:hover:not(:disabled) { transform: scale(1.05); }
        #why-send-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      `}</style>
                    <button id="why-chat-toggle" onClick={() => setIsOpen(!isOpen)} style={{ position: 'fixed', bottom: '24px', right: '24px', width: '60px', height: '60px', background: 'linear-gradient(135deg, #E31837 0%, #000000 100%)', borderRadius: '50%', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: '0 4px 20px rgba(227, 24, 55, 0.4)', zIndex: 9999, transition: 'transform 0.2s, box-shadow 0.2s' }} aria-label="Toggle chat">
                        {isOpen ? <svg width="24" height="24" fill="none" stroke="#fff" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg> : <svg width="28" height="28" fill="none" stroke="#fff" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" /></svg>}
                    </button>
                    {isOpen && (
                        <div style={{ position: 'fixed', bottom: '100px', right: '24px', width: '400px', maxWidth: 'calc(100vw - 48px)', height: '550px', maxHeight: 'calc(100vh - 140px)', background: '#fff', borderRadius: '20px', boxShadow: '0 10px 40px rgba(0,0,0,0.15)', display: 'flex', flexDirection: 'column', overflow: 'hidden', zIndex: 9999, border: '1px solid rgba(0,0,0,0.08)' }}>
                            <div style={{ background: 'linear-gradient(135deg, #E31837 0%, #000000 100%)', color: '#fff', padding: '20px', display: 'flex', alignItems: 'center', gap: '12px' }}>
                                <div style={{ width: '45px', height: '45px', background: 'rgba(255,255,255,0.2)', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '24px' }}></div>
                                <div><h3 style={{ margin: 0, fontSize: '18px', fontWeight: 'bold' }}>WHY RACING EVENTS</h3><p style={{ margin: 0, fontSize: '12px', opacity: 0.9 }}>Ask about events, registration, and more!</p></div>
                            </div>
                            <div style={{ flex: 1, overflowY: 'auto', padding: '20px', background: '#f8fafc', display: 'flex', flexDirection: 'column', gap: '16px' }}>
                                {messages.map((msg, i) => (
                                    <div key={i} style={{ display: 'flex', justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start' }}>
                                        <div style={{ maxWidth: '85%', padding: '12px 16px', borderRadius: msg.role === 'user' ? '18px 18px 4px 18px' : '18px 18px 18px 4px', background: msg.role === 'user' ? 'linear-gradient(135deg, #E31837 0%, #000000 100%)' : '#fff', color: msg.role === 'user' ? '#fff' : '#1f2937', fontSize: '14px', lineHeight: '1.5', boxShadow: msg.role === 'user' ? 'none' : '0 2px 8px rgba(0,0,0,0.06)', border: msg.role === 'user' ? 'none' : '1px solid rgba(0,0,0,0.04)' }}>{msg.content}</div>
                                    </div>
                                ))}
                                {isLoading && <div style={{ display: 'flex', justifyContent: 'flex-start' }}><div style={{ padding: '12px 16px', borderRadius: '18px 18px 18px 4px', background: '#fff', boxShadow: '0 2px 8px rgba(0,0,0,0.06)' }}><div style={{ display: 'flex', gap: '6px' }}><span style={{ width: '8px', height: '8px', background: '#cbd5e1', borderRadius: '50%', animation: 'chatBounce 0.6s infinite 0ms' }} /><span style={{ width: '8px', height: '8px', background: '#cbd5e1', borderRadius: '50%', animation: 'chatBounce 0.6s infinite 150ms' }} /><span style={{ width: '8px', height: '8px', background: '#cbd5e1', borderRadius: '50%', animation: 'chatBounce 0.6s infinite 300ms' }} /></div></div></div>}
                                <div ref={messagesEndRef} />
                            </div>
                            <div style={{ padding: '16px 20px', background: '#fff', borderTop: '1px solid #e5e7eb', display: 'flex', gap: '12px', alignItems: 'center' }}>
                                <input id="why-chat-input" type="text" value={input} onChange={(e) => setInput(e.target.value)} onKeyPress={handleKeyPress} placeholder="Ask about events, registration..." style={{ flex: 1, padding: '12px 18px', borderRadius: '25px', border: '2px solid #e5e7eb', fontSize: '14px', outline: 'none' }} disabled={isLoading} />
                                <button id="why-send-btn" onClick={sendMessage} disabled={isLoading || !input.trim()} style={{ width: '44px', height: '44px', borderRadius: '50%', background: 'linear-gradient(135deg, #E31837 0%, #000000 100%)', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}><svg width="20" height="20" fill="none" stroke="#fff" strokeWidth="2"><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></svg></button>
                            </div>
                        </div>
                    )}
                </>
            );
        }
        ReactDOM.createRoot(document.getElementById('chatbot-root')).render(<WhyRacingChatbot />);
    </script>

    <script src="assets/js/signup-form.js"></script>
</body>

</html>